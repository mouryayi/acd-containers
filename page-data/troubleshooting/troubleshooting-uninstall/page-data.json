{"componentChunkName":"component---src-pages-troubleshooting-troubleshooting-uninstall-md","path":"/troubleshooting/troubleshooting-uninstall/","result":{"pageContext":{"frontmatter":{"title":"Troubleshooting Uninstall","excerpt":"Troubleshooting the IBM ACD Container Edition uninstall issues","categories":"troubleshooting","slug":"troubleshooting-uninstall","toc":true},"relativePagePath":"/troubleshooting/troubleshooting-uninstall.md","titleType":"page","MdxNode":{"id":"790c42b7-02cf-506d-89fa-75ef49b814e3","children":[],"parent":"3eac6aa6-5b8d-540a-a6fc-db0eab22c82b","internal":{"content":"---\ntitle: \"Troubleshooting Uninstall\"\nexcerpt: \"Troubleshooting the IBM ACD Container Edition uninstall issues\"\ncategories: troubleshooting\nslug: troubleshooting-uninstall\ntoc: true\n---\n\n## Troubleshooting Uninstall\n\n### Removing a Terminating Namespace\n\nOccasionally some of the custom resources managed by an operator may remain in \"Terminating\" status waiting on a finalizer to complete. The resources remain in the \"Terminating\" state even after you have performed all the uninstall steps, or you are not able to uninstall from the web console because the uninstall option is greyed out.\n\n1. Check that the namespace is stuck in Terminating state upon deletion.\n\n    ```\n    oc get namespace <namespace>\n    ```\n\n    Output:\n\n    ```\n    NAME               STATUS        AGE\n    my-acd-namespace   Terminating   46m\n    ```\n\n1. Check for the `NamespaceFinalizersRemaining` and `NamespaceContentRemaining` messages in the `STATUS` section of the command output and perform the next step for each of the listed resources.\n\n    ```\n    oc get namespace <namespace> -o yaml\n    ```\n\n    Output:\n\n    ```\n    status:\n      conditions:\n      - lastTransitionTime: \"2021-06-23T18:20:03Z\"\n        message: All resources successfully discovered\n        reason: ResourcesDiscovered\n        status: \"False\"\n        type: NamespaceDeletionDiscoveryFailure\n      - lastTransitionTime: \"2021-06-23T18:20:03Z\"\n        message: All legacy kube types successfully parsed\n        reason: ParsedGroupVersions\n        status: \"False\"\n        type: NamespaceDeletionGroupVersionParsingFailure\n      - lastTransitionTime: \"2021-06-23T18:20:21Z\"\n        message: All content successfully deleted, may be waiting on finalization\n        reason: ContentDeleted\n        status: \"False\"\n        type: NamespaceDeletionContentFailure\n      - lastTransitionTime: \"2021-06-23T18:20:03Z\"\n        message: 'Some resources are remaining: acds.wh-acd.ibm.com has 1 resource instances'\n        reason: SomeResourcesRemain\n        status: \"True\"\n        type: NamespaceContentRemaining\n      - lastTransitionTime: \"2021-06-23T18:20:03Z\"\n        message: 'Some content in the namespace has finalizers remaining: helm.sdk.operatorframework.io/uninstall-release in 1 resource instances'\n        reason: SomeFinalizersRemain\n        status: \"True\"\n        type: NamespaceFinalizersRemaining\n      phase: Terminating\n    ```\n\n1. Delete all the remaining resources listed in the previous step.\n\n    For each of the resources to be deleted, do the following:\n\n    1. Get the object kind of the resource which needs to be removed. See the message in the above output.\n\n        Example:\n\n        `message: Some resources are remaining: acds.wh-acd.ibm.com has 1 resource instances`\n\n        Here `acds.wh-acd.ibm.com` is the object kind.\n\n    2. Get the Object name corresponding to the object kind.\n\n        ```\n        oc get  <object-kind> -n  <namespace>\n        ```\n\n        Example:\n\n        ```\n        oc get acds.wh-acd.ibm.com -n my-acd-namespace\n        ```\n\n        Example output:\n\n        ```\n        NAME                           AGE\n        acd-instances                  26h\n        ```\n\n    3. Patch the resources.\n\n        ```\n        oc patch -n <namespace> <object-kind>/<object-name> --type=merge -p '{\"metadata\": {\"finalizers\":null}}'\n        ```\n\n        Example:\n\n        ```\n        oc patch -n my-acd-namespace \\\n        acds.wh-acd.ibm.com/acd-instance \\\n        --type=merge -p '{\"metadata\": {\"finalizers\":null}}'\n        ```\n\n        Output:\n\n        ```\n        acd.wh-acd.ibm.com/acd-instance patched\n        ```\n\n1. Verify that the namespace is deleted.\n\n    ```\n    oc get namespace <namespace>\n    ```\n\n    Output:\n\n    ```\n    Error from server (NotFound): namespaces \"my-acd-namespace\" not found\n    ```\n\nUse these troubleshooting steps with caution. Read more about the [hidden dangers of terminating namespaces](https://www.openshift.com/blog/the-hidden-dangers-of-terminating-namespaces) and troubleshooting similar issues when [unable to delete a resource](https://access.redhat.com/solutions/4165791).\n","type":"Mdx","contentDigest":"680a17de0c242feef48ad777694a5312","owner":"gatsby-plugin-mdx","counter":235},"frontmatter":{"title":"Troubleshooting Uninstall","excerpt":"Troubleshooting the IBM ACD Container Edition uninstall issues","categories":"troubleshooting","slug":"troubleshooting-uninstall","toc":true},"excerpt":"Troubleshooting the IBM ACD Container Edition uninstall issues","exports":{},"rawBody":"---\ntitle: \"Troubleshooting Uninstall\"\nexcerpt: \"Troubleshooting the IBM ACD Container Edition uninstall issues\"\ncategories: troubleshooting\nslug: troubleshooting-uninstall\ntoc: true\n---\n\n## Troubleshooting Uninstall\n\n### Removing a Terminating Namespace\n\nOccasionally some of the custom resources managed by an operator may remain in \"Terminating\" status waiting on a finalizer to complete. The resources remain in the \"Terminating\" state even after you have performed all the uninstall steps, or you are not able to uninstall from the web console because the uninstall option is greyed out.\n\n1. Check that the namespace is stuck in Terminating state upon deletion.\n\n    ```\n    oc get namespace <namespace>\n    ```\n\n    Output:\n\n    ```\n    NAME               STATUS        AGE\n    my-acd-namespace   Terminating   46m\n    ```\n\n1. Check for the `NamespaceFinalizersRemaining` and `NamespaceContentRemaining` messages in the `STATUS` section of the command output and perform the next step for each of the listed resources.\n\n    ```\n    oc get namespace <namespace> -o yaml\n    ```\n\n    Output:\n\n    ```\n    status:\n      conditions:\n      - lastTransitionTime: \"2021-06-23T18:20:03Z\"\n        message: All resources successfully discovered\n        reason: ResourcesDiscovered\n        status: \"False\"\n        type: NamespaceDeletionDiscoveryFailure\n      - lastTransitionTime: \"2021-06-23T18:20:03Z\"\n        message: All legacy kube types successfully parsed\n        reason: ParsedGroupVersions\n        status: \"False\"\n        type: NamespaceDeletionGroupVersionParsingFailure\n      - lastTransitionTime: \"2021-06-23T18:20:21Z\"\n        message: All content successfully deleted, may be waiting on finalization\n        reason: ContentDeleted\n        status: \"False\"\n        type: NamespaceDeletionContentFailure\n      - lastTransitionTime: \"2021-06-23T18:20:03Z\"\n        message: 'Some resources are remaining: acds.wh-acd.ibm.com has 1 resource instances'\n        reason: SomeResourcesRemain\n        status: \"True\"\n        type: NamespaceContentRemaining\n      - lastTransitionTime: \"2021-06-23T18:20:03Z\"\n        message: 'Some content in the namespace has finalizers remaining: helm.sdk.operatorframework.io/uninstall-release in 1 resource instances'\n        reason: SomeFinalizersRemain\n        status: \"True\"\n        type: NamespaceFinalizersRemaining\n      phase: Terminating\n    ```\n\n1. Delete all the remaining resources listed in the previous step.\n\n    For each of the resources to be deleted, do the following:\n\n    1. Get the object kind of the resource which needs to be removed. See the message in the above output.\n\n        Example:\n\n        `message: Some resources are remaining: acds.wh-acd.ibm.com has 1 resource instances`\n\n        Here `acds.wh-acd.ibm.com` is the object kind.\n\n    2. Get the Object name corresponding to the object kind.\n\n        ```\n        oc get  <object-kind> -n  <namespace>\n        ```\n\n        Example:\n\n        ```\n        oc get acds.wh-acd.ibm.com -n my-acd-namespace\n        ```\n\n        Example output:\n\n        ```\n        NAME                           AGE\n        acd-instances                  26h\n        ```\n\n    3. Patch the resources.\n\n        ```\n        oc patch -n <namespace> <object-kind>/<object-name> --type=merge -p '{\"metadata\": {\"finalizers\":null}}'\n        ```\n\n        Example:\n\n        ```\n        oc patch -n my-acd-namespace \\\n        acds.wh-acd.ibm.com/acd-instance \\\n        --type=merge -p '{\"metadata\": {\"finalizers\":null}}'\n        ```\n\n        Output:\n\n        ```\n        acd.wh-acd.ibm.com/acd-instance patched\n        ```\n\n1. Verify that the namespace is deleted.\n\n    ```\n    oc get namespace <namespace>\n    ```\n\n    Output:\n\n    ```\n    Error from server (NotFound): namespaces \"my-acd-namespace\" not found\n    ```\n\nUse these troubleshooting steps with caution. Read more about the [hidden dangers of terminating namespaces](https://www.openshift.com/blog/the-hidden-dangers-of-terminating-namespaces) and troubleshooting similar issues when [unable to delete a resource](https://access.redhat.com/solutions/4165791).\n","fileAbsolutePath":"/home/travis/build/IBM/acd-containers/src/pages/troubleshooting/troubleshooting-uninstall.md"}}},"staticQueryHashes":["1054721580","1054721580","1364590287","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}